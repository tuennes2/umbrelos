services:
  app_proxy:
    image: getumbrel/umbrel-app-proxy:1.0.0
    restart: unless-stopped
    environment:
      APP_HOST: semnet-kopia_server_1
      APP_PORT: 51515

  server:
    image: kopia/kopia:latest
    container_name: semnet-kopia_server
    restart: unless-stopped
    environment:
      # Unbedingt vor Produktivbetrieb Ã¤ndern
      KOPIA_PASSWORD: "welcome!"
    command: >
      server start
      --address=0.0.0.0:51515
      --config-file=/app/config/repository.config
      --log-dir=/app/logs
    volumes:
      # Persistente Kopia-Daten
      - ${APP_DATA_DIR}/config:/app/config
      - ${APP_DATA_DIR}/cache:/app/cache
      - ${APP_DATA_DIR}/logs:/app/logs

      # Beispiel: Umbrel-App-Daten als Backup-Quelle
      - /home/umbrel/umbrel/app-data:/data:ro
